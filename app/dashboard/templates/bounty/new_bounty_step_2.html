<form-wrapper v-if="step === 2" :heading="'Bounty Details'" :current-step="step" :total-steps="currentSteps.length"
  @update-navigation="updateNav">

  <!-- Bounty Information -->
  <div class="row mb-4">
    <div class="col-md-10 new-border">
      <label class="mb-1 font-subheader font-weight-normal letter-spacing">Bounty information</label>

      <div class="btn-group-toggle d-flex flex-column flex-lg-row flex-wrap pt-1">
        <label
          v-bind:class="'btn btn-radio text-left chain-btn mr-2 mb-2 py-2 px-2 bounty-information-label ' + ((form.bountyInformationSource == 0)?'active':'')">
          <input type="radio" name="bounty_information" value="0" v-model="form.bountyInformationSource">
          <div class="p-1">
            <p class="m-0 text-grey-500 font-subheader">Import from GitHub</p>
            <p class="m-0 text-grey-400 mt-1">Import details from a GitHub issue</p>
          </div>
        </label>
        <label
          v-bind:class="'btn btn-radio text-left chain-btn mr-2 mb-2 py-2 px-2 bounty-information-label ' + ((form.bountyInformationSource == 1)?'active':'')">
          <input type="radio" name="bounty_information" value="1" v-model="form.bountyInformationSource">
          <div class="p-1">
            <p class="m-0 text-grey-500 font-subheader">Create Custom Bounty</p>
            <p class="m-0 text-grey-400 mt-1">Create a new bounty from scratch</p>
          </div>
        </label>
      </div>

      <div v-if="form.bountyInformationSource !== null">
        <!-- GitHub Issue Url -->
        <div v-if="form.bountyInformationSource === '0'" class="mb-4">
          <label class="mb-1 font-subheader font-weight-normal letter-spacing">GitHub Issue Url</label>
          <input class="form-control" name='issueURL' v-model="form.issueUrl" type="url"
            placeholder="https://github.com/org/repo/issues/n" @input="getIssueDetails(form.issueUrl)"
            value="{% if issueURL %}{{ issueURL }}{% endif %}" required />
        </div>

        <!-- GitHub Issue Title -->
        <div v-if="(form.bountyInformationSource === '0' && form.issueDetails) || form.bountyInformationSource === '1'"
          class="mb-4">
          <label class="mb-1 font-subheader font-weight-normal letter-spacing">Title</label>
          <input class="form-control" name='title' v-model="form.issueDetails.title"
            :readonly="form.bountyInformationSource === '0'" required />
        </div>

        <!-- GitHub Issue Details -->
        <div v-if="form.bountyInformationSource === '0' && form.issueDetails" class="mb-4">
          <label class="mb-1 font-subheader font-weight-normal letter-spacing">Description</label>

          <a class="btn btn-link" :href="form.issueUrl" target="_blank" rel="noopener noreferrer">
            Edit on Github <i class="far fa-external-link"></i>
          </a>

          <a class="btn btn-link" @click="getIssueDetails(form.issueUrl)">
            Resync with GitHub<i class="far fa-sync ml-1"></i>
          </a>

          <div class="issue_description mb-3" :inner-html.prop="form.issueDetails.description | markdownit"></div>
        </div>

        <!-- Issue Details Editor -->
        <div v-if="form.bountyInformationSource === '1'" class="mb-4">
          <label class="mb-1 font-subheader font-weight-normal letter-spacing">Description</label>

          <quill-editor ref="quillEditorDesc" @change="quilUpdated($event)"
            :class="`editor ${errors.description && !form.description_rich.length ? 'invalid' : ''}`"
            :options="editorOptionPrio"></quill-editor>
        </div>

        <!-- Acceptance Criteria -->
        <div class="row" style="position: relative;">
          <div class="col-md-12 mb-4">
            <label class="mb-1 font-subheader font-weight-normal letter-spacing">Acceptance Criteria <i
                class="far fa-times" @click="popover('#new-bounty-acceptace-criteria')"></i></label>
            <textarea id="new-bounty-acceptace-criteria" class="form-control" name='acceptanceCriteria'
              v-model="form.acceptanceCriteria"
              placeholder="What is the deliverable and acceptance criteria for this bounty?" required></textarea>      
          </div>

          <div class="ml-4 col-md-3 bounty-help" role="tooltip" x-placement="right" style="">
            <div class="popover-body">Check out great examples of acceptance criteria from some of our past successful
              bounties!</div>
          </div>
        </div>

        <!-- Ressources -->
        <div class="mb-4">
          <label class="mb-1 font-subheader font-weight-normal letter-spacing">Ressources</label>
          <textarea class="form-control" name='ressources' v-model="form.ressources"
            placeholder="Useful resources for working on this bounty (documentations, tutorials, etc.)"
            required></textarea>
        </div>

        <!-- Contact Details -->
        <div class="mb-4">
          <label class="mb-1 font-subheader font-weight-normal letter-spacing">Contact Details</label>
          <p class="text-muted mb-0">How should the contributor get in touch with you / the team? Enter Discord handle /
            Telegram / email address</p>

          <div v-for="(details, index) in form.contactDetails" class="form-row mt-1">
            <div class="col">
              <v-select :required="'true'" :options="$root.contactDetailsType" v-model="details.type">
              </v-select>
            </div>

            <div class="col">
              <div class="input-group is-invalid">
                <input name="funderAddress" type="text" placeholder="mydiscord#1234" class="form-control">
                <div class="input-group-append">
                  <button type="button"
                    v-bind:class="'btn btn-link text-danger ' + ($root.form.contactDetails.length > 1?'':'hidden')"
                    @click="removeContactDetails(index)"><i class="far fa-times"></i></button>
                  <button type="button"
                    v-bind:class="'btn btn-link ' + ($root.form.contactDetails.length === index + 1?'':'invisible')"
                    @click="addContactDetails()"><i class="far fa-plus"></i></button>
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- Show as Organisation -->
        <div class="mb-4" style="position: relative;">
          <label class="mb-1 font-subheader font-weight-normal letter-spacing">Show as Organisation</label>
          <p class="text-muted mb-0">Enter an organization GitHub link to display its logo and name on this bounty</p>
          <input class="form-control" name='organisationUrl' v-model="form.organisationUrl" type="url"
            placeholder="https://github.com/org/repo/issues/n" required />

          <div class="ml-3 popover bs-popover-right show col-md-2" role="tooltip" x-placement="right" style="position: absolute; left: 100%">
            <div class="arrow" style="bottom: 50%;"></div>
            <h3 class="popover-header"></h3>
            <div class="popover-body">Check out great examples of acceptance criteria from some of our past successful
              bounties!</div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-2" style="background-color: red;">
      Help placeholder ....

    </div>
  </div>
</form-wrapper>